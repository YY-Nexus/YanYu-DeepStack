# YYC³ UI 组件库使用指南

## 1. 简介

YYC³ UI 组件库是一个基于 React 和 Tailwind CSS 的现代化 UI 组件集合，专为 YYC³ 深度堆栈全栈智创引擎设计。本组件库旨在逐步替换项目中使用的 MUI 和 Ant Design 组件，提供统一的设计语言和交互体验。

## 2. 安装和配置

### 2.1 安装依赖

组件库已包含在项目中，无需额外安装。使用前请确保项目的核心依赖已正确安装：

```bash
# 在项目根目录执行
npm install
```

### 2.2 引入组件库

在应用的入口文件中引入组件库，以初始化版本控制和更新检查机制：

```tsx
// 例如在 app/layout.tsx 中
import 'components/ui'; // 自动初始化组件库

// 或者选择性导入
import { Alert, Button, Progress, Tooltip } from 'components/ui';
```

## 3. 使用组件

### 3.1 基本使用

所有组件都可以从 `components/ui` 导入，使用方式如下：

```tsx
import { Button, Alert, Progress } from 'components/ui';

function MyComponent() {
  return (
    <div>
      <Alert type="success" message="操作成功" />
      <Button variant="primary" onClick={() => console.log('点击了按钮')}>
        主要按钮
      </Button>
      <Progress value={66} showInfo />
    </div>
  );
}
```

### 3.2 组件版本检查

可以使用版本管理工具检查组件的版本信息和兼容性：

```tsx
import { ComponentVersionManager } from 'components/ui';

// 检查特定组件的版本
const buttonVersion = ComponentVersionManager.getInstance().getComponentVersion('Button');
console.log(`Button 组件版本: ${buttonVersion?.version}`);

// 检查版本兼容性
const isCompatible = ComponentVersionManager.getInstance().isVersionCompatible('Progress', '1.0.0');
console.log(`Progress 组件与 1.0.0 版本兼容: ${isCompatible}`);
```

### 3.3 更新管理

组件库提供了更新管理工具，可以检查和应用更新：

```tsx
import { ComponentUpdateManager } from 'components/ui';

// 手动检查更新
async function checkForUpdates() {
  const updateManager = ComponentUpdateManager.getInstance();
  await updateManager.checkForUpdates();
  
  // 获取更新状态
  const status = updateManager.getUpdateStatusSummary();
  console.log(`有 ${status.componentsWithUpdates} 个组件需要更新`);
}

// 应用特定组件的更新
async function updateComponent(componentName: string) {
  const updateManager = ComponentUpdateManager.getInstance();
  const success = await updateManager.applyUpdate(componentName);
  console.log(`更新 ${componentName} ${success ? '成功' : '失败'}`);
}

// 应用所有更新
async function updateAllComponents() {
  const updateManager = ComponentUpdateManager.getInstance();
  const result = await updateManager.applyAllUpdates();
  console.log(`更新完成: ${result.applied} 个成功, ${result.failed} 个失败`);
}
```

## 4. 组件文档

组件库提供了详细的API文档，可以通过以下方式访问：

### 4.1 查看生成的文档

```bash
# 生成组件文档
npm run generate-docs
```

生成的文档位于 `docs/components` 目录下。

### 4.2 组件API参考

每个组件文档包含以下内容：

- 组件描述和功能说明
- 属性列表和类型定义
- 使用示例代码
- 版本信息

## 5. 自定义和扩展

### 5.1 自定义组件样式

组件库基于 Tailwind CSS 构建，可以通过 Tailwind 的类名来覆盖默认样式：

```tsx
<Button className="bg-indigo-600 hover:bg-indigo-700">自定义样式按钮</Button>
```

### 5.2 扩展现有组件

可以通过组合现有组件来创建新的业务组件：

```tsx
import { Button, Card, Alert } from 'components/ui';

interface BusinessCardProps {
  title: string;
  content: string;
  onAction: () => void;
  showAlert?: boolean;
}

export function BusinessCard({ title, content, onAction, showAlert = false }: BusinessCardProps) {
  return (
    <Card>
      <h3>{title}</h3>
      <p>{content}</p>
      <Button onClick={onAction}>操作</Button>
      {showAlert && <Alert type="info" message="提示信息" />}
    </Card>
  );
}
```

## 6. 迁移指南

### 6.1 从 MUI 迁移

将 MUI 组件替换为 YYC³ UI 组件的步骤：

1. 移除 MUI 导入语句
2. 导入对应的 YYC³ UI 组件
3. 调整属性名和行为差异

例如，从 MUI Button 迁移：

```tsx
// 原 MUI 代码
import { Button as MuiButton } from '@mui/material';

// 修改为 YYC³ UI
import { Button } from 'components/ui';

// 使用方式
// MUI: <MuiButton variant="contained" color="primary">点击我</MuiButton>
// YYC³ UI: <Button variant="primary">点击我</Button>
```

### 6.2 从 Ant Design 迁移

将 Ant Design 组件替换为 YYC³ UI 组件的步骤：

1. 移除 antd 导入语句
2. 导入对应的 YYC³ UI 组件
3. 调整属性名和行为差异

例如，从 Ant Design Progress 迁移：

```tsx
// 原 Ant Design 代码
import { Progress } from 'antd';

// 修改为 YYC³ UI
import { Progress } from 'components/ui';

// 使用方式
// Ant Design: <Progress percent={60} />
// YYC³ UI: <Progress value={60} />
```

## 7. 版本控制和更新策略

### 7.1 版本命名规则

组件库使用语义化版本控制（Semantic Versioning）：

- **主版本（MAJOR）**: 不兼容的API变更
- **次版本（MINOR）**: 向下兼容的功能性新增
- **修订版本（PATCH）**: 向下兼容的问题修正

### 7.2 更新检查频率

- 开发环境：每30分钟自动检查一次
- 生产环境：不会自动检查，需要手动触发

### 7.3 更新流程

1. 检查更新：`updateManager.checkForUpdates()`
2. 查看更新状态：`updateManager.getUpdateStatusSummary()`
3. 应用更新：`updateManager.applyUpdate('ComponentName')` 或 `updateManager.applyAllUpdates()`

## 8. 最佳实践

### 8.1 组件导入规范

- 始终从 `components/ui` 导入组件，而非直接从组件文件导入
- 导入时使用解构语法，只导入需要的组件

```tsx
// 推荐
import { Button, Alert } from 'components/ui';

// 不推荐
import Button from 'components/ui/button';
```

### 8.2 版本兼容性检查

在使用依赖特定组件版本的功能前，先检查版本兼容性：

```tsx
import { ComponentVersionManager } from 'components/ui';

function FeatureRequiringNewAPI() {
  const versionManager = ComponentVersionManager.getInstance();
  const isCompatible = versionManager.isVersionCompatible('Button', '1.2.0');
  
  if (!isCompatible) {
    return <Alert type="warning" message="需要更新组件库以使用此功能" />;
  }
  
  // 使用需要新版本API的功能
  return <Button variant="ghost">新样式按钮</Button>;
}
```

### 8.3 性能优化

- 避免不必要的组件重新渲染
- 使用 React.memo 包装频繁渲染的组件
- 对于列表渲染，提供稳定的 key 属性

## 9. 问题排查

### 9.1 常见问题

1. **组件样式异常**
   - 检查 Tailwind CSS 配置
   - 确认没有样式冲突

2. **组件不更新**
   - 确认版本控制机制已正确初始化
   - 检查更新配置和权限

3. **性能问题**
   - 使用 React DevTools 分析组件渲染
   - 检查是否存在不必要的渲染循环

### 9.2 获取帮助

如有任何问题或建议，请联系组件库维护团队：

- 提交 issue：[项目仓库地址]/issues
- 联系开发者：[团队邮箱]

## 10. 维护和贡献

### 10.1 组件库维护

组件库维护遵循以下流程：

- 定期检查和修复组件问题
- 收集用户反馈并迭代改进
- 定期更新组件库版本

### 10.2 贡献组件

如需贡献新组件，请遵循以下步骤：

1. 创建组件文件，遵循现有的组件结构和命名规范
2. 添加完整的类型定义和文档注释
3. 编写组件实现和示例
4. 在 `components/ui/index.ts` 中注册组件
5. 提交代码并请求审核

---

*本指南会定期更新，请查看最新版本获取完整信息。*
*最后更新时间：2024-10-15*