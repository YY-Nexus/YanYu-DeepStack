# YanYu-LLM项目技术栈优化方案

## 一、当前技术栈现状分析

### 1. 组件库使用现状

通过代码分析，发现项目中存在多种UI组件库混用的情况：

- **自定义UI组件系统**（主要）：`@/components/ui/` 目录下的组件，基于 Radix UI 构建，使用 Tailwind CSS 进行样式设计
- **自定义品牌组件**：`BrandButton`、`BrandCard`、`BrandBadge` 等项目特定的品牌组件
- **Ant Design 组件**：仅在 `ModelEngineDashboardPanel.tsx` 中使用了少量组件（Progress, Button, Tooltip）
- **MUI 组件**：在 `src/modules/emotion-sound-platform/components.tsx` 中使用了 MUI 组件

### 2. React Native 使用现状

- 项目包含独立的 `mobile/` 目录，存放React Native移动端应用代码
- 移动端使用了 `react-native-paper`、`react-native-vector-icons` 等React Native特有库
- 移动端与Web端代码结构分离，但缺少清晰的代码共享策略

### 3. 存在的问题

1. **组件库混用**：多种组件库共存导致样式不统一、依赖冗余
2. **类型冲突风险**：React Native和Web类型定义可能产生冲突
3. **维护成本增加**：需要同时维护多套组件库的使用方式
4. **性能开销**：冗余的组件库增加了项目体积和加载时间

## 二、技术栈优化建议

### 1. 组件库优化方案

**核心策略**：统一使用自定义UI组件系统，逐步移除Ant Design和MUI依赖

#### 具体措施

1. **统一组件库**：
   - 以现有的 `@/components/ui/` 自定义组件为基础进行扩展
   - 所有新开发的功能必须使用自定义UI组件

2. **组件替换计划**：
   - **短期**：替换 `ModelEngineDashboardPanel.tsx` 中的 Ant Design 组件
   - **中期**：评估并替换 `emotion-sound-platform` 中的 MUI 组件
   - **长期**：完全移除 `antd`、`@mui/material` 等依赖

3. **组件标准化**：
   - 建立组件使用规范文档
   - 定义统一的设计系统和样式变量

### 2. React Native 与 Web 分离方案

**核心策略**：保持代码分离的同时，优化共享逻辑的管理

#### 具体措施

1. **代码组织优化**：
   - 明确区分 Web 和 Mobile 代码目录
   - 对于可共享的业务逻辑，提取到独立的核心库中

2. **依赖管理优化**：
   - 在 package.json 中为 Web 和 Mobile 分别指定依赖
   - 避免在 Web 代码中引入 React Native 相关依赖

3. **构建流程优化**：
   - 为 Web 和 Mobile 设置独立的构建脚本
   - 确保构建过程中不会错误引入不兼容的依赖

## 三、实施计划

### 第一阶段（1-2周）：组件库评估与准备

1. 完成现有组件库使用情况的全面审计
2. 创建组件映射表，明确替换关系
3. 完善自定义UI组件系统，补充必要的组件

### 第二阶段（2-3周）：组件替换实施

1. 替换 `ModelEngineDashboardPanel.tsx` 中的 Ant Design 组件
2. 创建组件替换后的测试用例
3. 验证功能和样式一致性

### 第三阶段（3-4周）：依赖清理与优化

1. 从 package.json 中移除未使用的组件库依赖
2. 优化构建配置，确保移除冗余代码
3. 进行性能测试和对比分析

## 四、具体组件替换示例

### 1. ModelEngineDashboardPanel.tsx 优化示例

**当前代码**：
```tsx
import { Progress, Button, Tooltip } from "antd";
import { ThunderboltOutlined, CodeOutlined, ExperimentOutlined, DatabaseOutlined } from "@ant-design/icons";

// 使用Ant Design组件的代码...
```

**优化后代码**：
```tsx
import { Progress } from "@/components/ui/progress";
import { Button } from "@/components/ui/button";
import { Tooltip } from "@/components/ui/tooltip";
import { Zap, Code, FlaskConical, Database } from "lucide-react";

// 使用自定义组件的代码...
```

## 五、项目结构优化建议

### 优化后的目录结构

```
YanYu-LLM/
├── app/                # Web应用代码（Next.js）
├── components/         # 共享组件
│   ├── ui/             # 基础UI组件
│   └── brand/          # 品牌组件
├── mobile/             # React Native移动端应用
│   ├── screens/        # 屏幕组件
│   ├── components/     # 移动端组件
│   └── store/          # 移动端状态管理
├── src/                # 核心业务逻辑
├── lib/                # 工具库和服务
└── packages/           # 可共享的核心包
```

## 六、总结与预期收益

通过实施上述技术栈优化方案，预期可以获得以下收益：

1. **一致性提升**：统一的组件库确保了UI的一致性
2. **性能优化**：减少冗余依赖，降低包体积
3. **维护性提升**：集中维护一套组件库，降低维护成本
4. **开发效率提升**：统一的组件使用方式，简化开发流程
5. **技术债务减少**：避免组件库混用导致的潜在问题

通过系统性的技术栈优化，项目将变得更加健壮、高效，为后续的功能扩展和性能优化奠定良好基础。